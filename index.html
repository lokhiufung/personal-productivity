<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Tracker</title>
    <link rel="stylesheet" href="assets/styles.css">   
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Progress Tracker</h1>
            <p>Celebrating your journey to algorithmic trading success</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="tasksCompleted">0</div>
                <div class="stat-label">Tasks Completed This Week</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalTasks">0</div>
                <div class="stat-label">Total Tasks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="weeksTracked">0</div>
                <div class="stat-label">Weeks of Progress</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completionRate">0%</div>
                <div class="stat-label">Completion Rate</div>
            </div>
        </div>

        <div id="celebration" style="display: none;"></div>
        
        <div class="graph-section section">
            <h2>ğŸ•¸ï¸ Task Dependency Graph</h2>
            <div class="graph-controls">
                <div class="graph-controls-group">
                    <button class="btn" onclick="refreshGraph()">Refresh Graph</button>
                    <button class="btn btn-secondary" onclick="resetGraphView()">Reset View</button>
                </div>
                <div class="graph-controls-group">
                    <div class="graph-toggle">
                        <input type="checkbox" id="showCompletedNodes" checked onchange="refreshGraph()">
                        <label for="showCompletedNodes">Show completed tasks</label>
                    </div>
                    <div class="graph-toggle">
                        <input type="checkbox" id="highlightBlocked" checked onchange="refreshGraph()">
                        <label for="highlightBlocked">Highlight blocked tasks</label>
                    </div>
                </div>
                <div class="zoom-controls">
                    <button class="zoom-btn" id="zoomOutBtn" onclick="zoomOut()" title="Zoom Out">âˆ’</button>
                    <span class="zoom-level" id="zoomLevel">100%</span>
                    <button class="zoom-btn" id="zoomInBtn" onclick="zoomIn()" title="Zoom In">+</button>
                </div>
            </div>
            <div class="graph-container">
                <svg id="dependencyGraph"></svg>
                <div class="graph-legend">
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #d1fae5; border-color: #10b981;"></div>
                        <span>Completed</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #f1f5f9; border-color: #64748b;"></div>
                        <span>Available</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-circle" style="background: #fee2e2; border-color: #ef4444;"></div>
                        <span>Blocked</span>
                    </div>
                    <div class="legend-item">
                        <svg width="20" height="2"><line x1="0" y1="1" x2="20" y2="1" stroke="#94a3b8" stroke-width="2"/></svg>
                        <span>Dependency</span>
                    </div>
                    <div class="legend-item">
                        <svg width="20" height="2"><line x1="0" y1="1" x2="20" y2="1" stroke="#ef4444" stroke-width="2" stroke-dasharray="3,3"/></svg>
                        <span>Blocking</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="section">
                <h2>ğŸ“ This Week's Tasks</h2>
                <div class="task-input">
                    <input type="text" id="taskInput" placeholder="What are you working on this week?" maxlength="100">
                    <button class="btn" onclick="showTaskForm()">Add Task</button>
                </div>
                
                <!-- Enhanced Task Creation Form (initially hidden) -->
                <div id="taskForm" class="task-form" style="display: none;">
                    <div class="task-form-content">
                        <h3>ğŸ“‹ Create New Task</h3>
                        <input type="text" id="taskFormInput" placeholder="Task description" maxlength="100">
                        
                        <div class="dependency-section">
                            <label for="dependsOn">ğŸ”— Dependencies (optional):</label>
                            <div class="dependency-container">
                                <div id="selectedDependencies" class="selected-dependencies"></div>
                                <select id="dependsOn" class="dependency-select">
                                    <option value="">Select a task to add as dependency</option>
                                </select>
                            </div>
                            <small class="dependency-hint">This task can only be started after ALL selected tasks are completed</small>
                        </div>
                        
                        <div class="priority-section">
                            <label for="priority">â­ Priority:</label>
                            <select id="priority" class="priority-select">
                                <option value="low">ğŸŸ¢ Low</option>
                                <option value="medium" selected>ğŸŸ¡ Medium</option>
                                <option value="high">ğŸ”´ High</option>
                            </select>
                        </div>
                        
                        <div class="task-form-actions">
                            <button class="btn" onclick="addTaskWithDependency()">Create Task</button>
                            <button class="btn btn-secondary" onclick="hideTaskForm()">Cancel</button>
                        </div>
                    </div>
                </div>
                
                <ul class="task-list" id="taskList"></ul>
            </div>

            <div class="section">
                <h2>âœ¨ Weekly Summary</h2>
                <textarea 
                    id="weeklySummary" 
                    class="summary-input" 
                    placeholder="Reflect on your week... What did you accomplish? What did you learn? What are you proud of?"
                ></textarea>
                <br><br>
                <button class="btn" onclick="saveWeeklySummary()">Save This Week</button>
                <button class="btn btn-secondary" onclick="generateAISummary()">Generate AI Summary</button>
                <button class="btn btn-secondary" onclick="clearWeek()">Start New Week</button>
            </div>

            <div class="section history">
                <h2>ğŸ“š Progress History</h2>
                <div id="historyList"></div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="assets/app.js"></script>
</body>
</html>